
<mat-accordion>
  <mat-expansion-panel class="mat-app-background2" (opened)="panelOpenState = true" role="button" (closed)="panelOpenState = false" [attr.aria-expanded]="panelOpenState === true ? true : false" *ngFor="let faq of faqs; let i = index">
    <mat-expansion-panel-header>
      <mat-panel-title [ngClass]="panelOpenState ? 'color-accent' : ''">
        {{faq?.topic}}
      </mat-panel-title>
      <!-- <mat-panel-description>
        Currently I am {{panelOpenState ? 'open' : 'closed'}}
      </mat-panel-description> -->
    </mat-expansion-panel-header>
    <!-- *ngIf="isGroupShown(i)" -->
    <div>
    <div class="text-left mat-body-2 mb-16" [innerHtml]="faq.description"></div>
    <fieldset *ngIf="!isNoClicked && !isYesClicked">
      <legend class="mat-body-2 my-8 pb-0 text-center">{{data?.constants?.helpMsg}}&lrm;</legend>
      <div class="d-flex flex-jc-center">
        <button mat-raised-button type="button" class="button-rounded mr-8 color-warn hover-bgcolor-warn" attr.aria-label="{{data?.constants?.noMsg}}" id="btn-no"
          (click)="noClicked(i,$event)" tabindex="0">{{data?.constants?.noMsg}}</button>
        <button mat-raised-button type="button" class="button-rounded color-success hover-bgcolor-success" attr.aria-label="{{data?.constants?.yesMsg}}" id="btn-yes"
          (click)="yesClicked(i,$event)" tabindex="0">{{data?.constants?.yesMsg}}</button>
        </div>
    </fieldset>
    <!-- *ngIf="isYesClicked || isSubmitted" -->
    <fieldset *ngIf="isYesClicked || isSubmitted">
      <legend tabindex="0" id="yes-clicked" class="mat-title my-16 pb-0 text-center color-success"> {{data?.constants?.thanksMsg}}</legend>
      <div *ngIf="isNoClicked && isSubmitted && extraTemplate" class="d-flex flex-ai-center">
        <ng-container *ngTemplateOutlet="extraTemplate">
        </ng-container>
      </div>
    </fieldset>
    <div class="d-flex flex-dc mt-16" *ngIf="!isSubmitted && isNoClicked">
      <h6 id="no-clicked" class="mat-body-2 mb-8" tabindex="0">{{data?.constants?.sorryMsg}}</h6>
      <form action="#" id="know-more-form" class="d-flex flex-dc m-0" *ngIf="!isSubmitted">
        <mat-form-field color="accent" appearance="fill">
          <mat-label for="knowMoreMsg">{{data?.constants?.knowMoreMsg}}</mat-label>
          <textarea matInput id="knowMoreMsg" name="moreInfo" placeholder="{{constants?.typeHere}}" maxlength="1000"
          [(ngModel)]="textValue"></textarea>
        </mat-form-field>
        <button mat-raised-button color="accent" type="submit" class="button-rounded ml-auto" (click)="submitClicked(textValue,i,$event)">{{constants?.submitButton}}</button>
      </form>
      <p class="mat-title color-accent text-center my-16" hidden="true" *ngIf="isSubmitted">{{data?.constants?.thanksMsg}}</p>
    </div>
  </div>
  </mat-expansion-panel>
</mat-accordion>


<div class="panel panel-default cc-faq-panel hide hidden" *ngFor="let faq of faqs; let i = index">
  <div data-toggle="collapse" role="button" attr.aria-expanded="{{isGroupShown(i)}}" (click)="toggleGroup(i,$event)" tabindex="0">
    <div class="panel-heading">
      <div class="text-left" [ngClass]="{'panel-title': !isGroupShown(i), 'panel-title-blue': isGroupShown(i)}">
        {{ faq?.topic}}
        <span>
          <i class="icon-svg icon-svg--xs ml-4" *ngIf="!isGroupShown(i)">
            <svg class="icon icon-svg--primary">
              <use xlink:href="assets/common-consumption/images/sprite.svg#arrow-down"></use>
            </svg>
          </i>
          <i class="icon-svg icon-svg--xs ml-4" *ngIf="isGroupShown(i)">
            <svg class="icon icon-svg--primary">
              <use xlink:href="assets/common-consumption/images/sprite.svg#arrow-up"></use>
            </svg>
          </i>
        </span>
        <!--<img class="btn-arrow" src="../../assets/faq/resources/images/Arrow.png" *ngIf="!isGroupShown(i)">
        <img class="btn-arrow" src="../../assets/faq/resources/images/UpArrow.png" *ngIf="isGroupShown(i)">-->
      </div>
    </div>
  </div>
  <div id="collapse' + key + '" class="panel-collapse collapse" *ngIf="isGroupShown(i)">
    <div class="panel-body">
      <p class="panelText text-left" [innerHtml]="faq.description"></p>
    </div>
    <fieldset class="panel-interact" *ngIf="!isNoClicked && !isYesClicked">
      <legend class="panelText m-0 pb-0">{{data?.constants?.helpMsg}}&lrm;</legend>
      <div class="d-flex flex-jc-center">
        <button type="button" class="sb-btn sb-btn-normal sb-btn-outline-primary mr-8 no-btn" attr.aria-label="{{data?.constants?.noMsg}}" id="btn-no"
          (click)="noClicked(i,$event)" tabindex="0">{{data?.constants?.noMsg}}</button>
        <button type="button" class="sb-btn sb-btn-normal sb-btn-success yes-btn" attr.aria-label="{{data?.constants?.yesMsg}}" id="btn-yes"
          (click)="yesClicked(i,$event)" tabindex="0">{{data?.constants?.yesMsg}}</button>
        </div>
    </fieldset>
    <fieldset class="panel-interact" *ngIf="isYesClicked || isSubmitted">
      <legend tabindex="0" id="yes-clicked" class="yes-clicked m-0 pb-0"> {{data?.constants?.thanksMsg}}</legend>
      <div *ngIf="isNoClicked && isSubmitted && extraTemplate" class="extraTemplate">
        <ng-container *ngTemplateOutlet="extraTemplate">
        </ng-container>
      </div>
    </fieldset>
    <div class="panel-info" *ngIf="!isSubmitted && isNoClicked">
      <h6 id="no-clicked" tabindex="0">{{data?.constants?.sorryMsg}}</h6>
      <form action="#" id="know-more-form" class="know-more-form" *ngIf="!isSubmitted">
      <label for="knowMoreMsg">{{data?.constants?.knowMoreMsg}}</label>
        <textarea type="text" id="knowMoreMsg" name="moreInfo" placeholder="{{constants?.typeHere}}" class="input-text" maxlength="1000"
          [(ngModel)]="textValue"></textarea>
        <input type="submit" value="{{constants?.submitButton}}" class="submit-button"
          (click)="submitClicked(textValue,i,$event)" tabindex="0">
      </form>
      <p class="no-clicked" hidden="true" *ngIf="isSubmitted"> {{data?.constants?.thanksMsg}} </p>
    </div>
  </div>
</div>